(this["webpackJsonppare-down"]=this["webpackJsonppare-down"]||[]).push([[0],{11:function(t,e,a){t.exports=a(19)},16:function(t,e,a){},17:function(t,e,a){},19:function(t,e,a){"use strict";a.r(e);var s=a(0),n=a.n(s),r=a(10),i=a.n(r),o=(a(16),a(9)),c=a(2),l=a(1),p=a(4),u=a(3),m=a(6),h=a(5),d=(a(17),a(7)),f=a.n(d);function y(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.step,a=t.id,s=t.sort,n=t.userTrackNum,r=t.playlistName,i=t.imageUrl,o=t.tracksNum,c=t.uris;this.setState({step:e,id:a,sort:s,userTrackNum:n,playlistName:r,imageUrl:i,tracksNum:o,uris:c})}var g=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(p.a)(this,Object(u.a)(e).call(this))).state={filterString:""},y=y.bind(Object(m.a)(t)),t}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=f.a.parse(window.location.search).access_token;e&&(fetch("https://api.spotify.com/v1/me",{headers:{Authorization:"Bearer "+e}}).then((function(t){return t.json()})).then((function(e){return t.setState({userID:e.id})})),fetch("https://api.spotify.com/v1/me/playlists",{headers:{Authorization:"Bearer "+e}}).then((function(t){return t.json()})).then((function(e){return t.setState({playlists:e.items.map((function(t){return 0===t.images.length&&t.images.push(""),{name:t.name,imageUrl:t.images[0].url,songsNum:t.tracks.total,id:t.id}})),step:1})})))}},{key:"render",value:function(){var t=this,e=this.state.playlists?this.state.playlists.filter((function(e){return e.name.toLowerCase().includes(t.state.filterString.toLowerCase())})):[];return n.a.createElement("div",{className:"App"},n.a.createElement("h1",{className:"app-name"},"Pare Down for Spotify"),n.a.createElement("h2",{className:"app-name__sub"},"Create copy of your playlist pared down to number of songs you have chosen to."),n.a.createElement(v,{step:this.state.step}),this.state.playlists&&1===this.state.step?n.a.createElement("div",{className:"playlist-grid"},e.map((function(e,a){return n.a.createElement(k,{playlist:e,step:t.state.step,key:a,userID:t.state.userID})}))):this.state.playlists&&2===this.state.step?n.a.createElement(w,{id:this.state.id,userID:this.state.userID}):this.state.playlists&&3===this.state.step?n.a.createElement(j,{id:this.state.id,sort:this.state.sort,userTrackNum:this.state.userTrackNum,userID:this.state.userID,playlistName:this.state.playlistName,imageUrl:this.state.imageUrl,tracksNum:this.state.tracksNum}):this.state.playlists&&4===this.state.step?n.a.createElement(O,{uris:this.state.uris,userID:this.state.userID,playlistName:this.state.playlistName}):n.a.createElement("div",{className:"btn",onClick:function(){window.location=window.location.href.includes("localhost")?"http://localhost:8888/login":"http://pare-down-backend.mtymon.me/login",t.setState({step:1})}},"log in with spotify"),n.a.createElement(D,null))}}]),e}(s.Component),v=function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return 1===this.props.step?n.a.createElement("h3",{className:"step--header"},this.props.step,". Select which playlist you would like to pare down: "):2===this.props.step?n.a.createElement("h3",{className:"step--header"},this.props.step,". Personalize playlist that will be created by pare down process: "):3===this.props.step?n.a.createElement("h3",{className:"step--header"},this.props.step,". Preview your pare down process: "):null}}]),e}(s.Component),k=function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){var t=this,e=this.props.playlist;return n.a.createElement("div",{className:"playlist",onClick:function(){return y({step:2,id:t.props.playlist.id})}},n.a.createElement("p",{className:"playlist__song-count"},"Number of songs: ",e.songsNum),n.a.createElement("div",{className:"playlist__cover"},n.a.createElement("img",{src:e.imageUrl,className:"playlist__cover--img",alt:e.name,title:e.name})),n.a.createElement("p",{className:"playlist__name"},e.name))}}]),e}(s.Component),w=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(p.a)(this,Object(u.a)(e).call(this))).state={inputValue:0},b=b.bind(Object(m.a)(t)),E=E.bind(Object(m.a)(t)),t}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){b()}},{key:"componentWillUnmount",value:function(){console.log("a")}}]),Object(l.a)(e,[{key:"render",value:function(){var t=this;return console.log(this.state),n.a.createElement("div",{id:"paredown"},n.a.createElement("div",{id:"paredown__left"},n.a.createElement("div",{id:"paredown__details"},n.a.createElement("img",{src:this.state.imageUrl,style:{width:"120px",height:"120px"},alt:this.state.name,title:this.state.name}),n.a.createElement("h1",null,this.state.name)),n.a.createElement("div",{className:"paredown__playlist"},n.a.createElement("p",{style:{textAlign:"center",fontWeight:"bold",fontSize:16}},this.state.tracksNum<=100?n.a.createElement("span",null,this.state.tracksNum," latest songs from selected playlist:"):n.a.createElement("span",null,"100 latest songs from selected playlist:")),this.state.tracks?!0===this.state.sort?this.state.tracks.map((function(e,a){return n.a.createElement(N,{track:e.track,key:a,num:a,iValue:t.state.inputValue})})):this.state.tracks.reverse().map((function(e,a){return n.a.createElement(N,{track:e.track,key:a,num:a,iValue:t.state.inputValue})})):n.a.createElement("p",null,"Sorry, couldn't find any songs in selected playlist. "))),n.a.createElement("div",{id:"paredown__right"},n.a.createElement("form",null,n.a.createElement("p",{className:"options__header"},"Pare it down to/by..."),n.a.createElement("div",{style:{textAlign:"center"}},n.a.createElement("input",{type:"number",min:"0",id:"new-num",onChange:function(e){return t.updateInputValue(e,t.state.tracksNum)}}),n.a.createElement("input",{type:"checkbox",id:"percent--btn"})),n.a.createElement("p",{id:"new-num__show"},"New playlist will have: ",this.state.inputValue," songs."),n.a.createElement("p",{className:"options__header",style:{marginTop:21}},"Add songs from selected playlist sorted by:",n.a.createElement("input",{type:"checkbox",id:"sort--btn",onClick:function(){return E()}})),n.a.createElement("div",{id:"create--btn",onClick:function(){return y({step:3,id:t.props.id,sort:t.state.sort,userTrackNum:t.state.inputValue,playlistName:t.state.name,imageUrl:t.state.imageUrl,tracksNum:t.state.tracksNum})}},"Create new playlist"))))}},{key:"updateInputValue",value:function(t,e){document.getElementById("percent--btn").checked?t.target.value<=100?this.setState({inputValue:(e*t.target.value/100).toFixed(0)}):this.setState({inputValue:e}):t.target.value<=e?this.setState({inputValue:t.target.value}):this.setState({inputValue:e})}}]),e}(s.Component),N=function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"shouldComponentUpdate",value:function(t){return this.props.iValue===t.iValue}},{key:"render",value:function(){return n.a.createElement("div",null,n.a.createElement("p",null,this.props.num+1,". ",n.a.createElement("span",{style:{opacity:"0.6"}},this.props.track.name,".")))}}]),e}(s.Component);function b(){var t=this,e=this.props.id,a=f.a.parse(window.location.search).access_token;!0===this.state.sort?fetch("https://api.spotify.com/v1/users/".concat(this.props.userID,"/playlists/").concat(e,"?fields=name,images,tracks.total"),{headers:{Authorization:"Bearer "+a}}).then((function(t){return t.json()})).then((function(s){return t.setState({name:s.name,imageUrl:0===s.images.length?s.images.push(""):s.images[0].url,tracksNum:s.tracks.total,how:fetch("https://api.spotify.com/v1/users/".concat(t.props.userID,"/playlists/").concat(e,"/tracks?offset=").concat(s.tracks.total>100?s.tracks.total-100:0),{headers:{Authorization:"Bearer "+a}}).then((function(t){return t.json()})).then((function(e){return t.setState({tracks:e.items})}))})})):!1===this.state.sort?fetch("https://api.spotify.com/v1/users/".concat(this.props.userID,"/playlists/").concat(e),{headers:{Authorization:"Bearer "+a}}).then((function(t){return t.json()})).then((function(e){return t.setState({name:e.name,imageUrl:0===e.images.length?e.images.push(""):e.images[0].url,tracksNum:e.tracks.total,tracks:e.tracks.items})})):this.state.sort||(fetch("https://api.spotify.com/v1/users/".concat(this.props.userID,"/playlists/").concat(e,"?fields=name,images,tracks.total"),{headers:{Authorization:"Bearer "+a}}).then((function(t){return t.json()})).then((function(s){return t.setState({name:s.name,imageUrl:0===s.images.length?s.images.push(""):s.images[0].url,tracksNum:s.tracks.total,how:fetch("https://api.spotify.com/v1/users/".concat(t.props.userID,"/playlists/").concat(e,"/tracks?offset=").concat(s.tracks.total>100?s.tracks.total-100:0),{headers:{Authorization:"Bearer "+a}}).then((function(t){return t.json()})).then((function(e){return t.setState({tracks:e.items})}))})})),this.setState({sort:!1}))}function E(){this.setState({sort:!this.state.sort}),b()}var j=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(p.a)(this,Object(u.a)(e).call(this))).state={uris:[],a:[]},t}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props.userTrackNum,a=this.props.id,s=f.a.parse(window.location.search).access_token;if(s&&e>0)if(!1===this.props.sort)for(var n=0;n<e;n+=100){var r=100,i=this.props.tracksNum-(n+100);e-n<100&&(r=e-n,i=this.props.tracksNum-n-r),fetch("https://api.spotify.com/v1/playlists/".concat(a,"/tracks?fields=items(track(uri, album.images))&limit=").concat(r,"&offset=").concat(i),{headers:{Authorization:"Bearer "+s}}).then((function(t){return t.json()})).then((function(e){return t.setState((function(t){return{uris:[].concat(Object(o.a)(t.uris),[e.items.reverse().map((function(t){return t.track.uri}))]),img4:e.items.slice(0,4).map((function(t){return t.track.album.images[1].url}))}}))}))}else if(!0===this.props.sort)for(var c=0;c<e;c+=100){var l=100;e-c<100&&(l=e-c),fetch("https://api.spotify.com/v1/playlists/".concat(a,"/tracks?fields=items(track(uri, album.images))&limit=").concat(l,"&offset=").concat(c),{headers:{Authorization:"Bearer "+s}}).then((function(t){return t.json()})).then((function(e){return t.setState((function(t){return{uris:[].concat(Object(o.a)(t.uris),[e.items.map((function(t){return t.track.uri}))]),img4:e.items.slice(0,4).map((function(t){return t.track.album.images[1].url}))}}))}))}}},{key:"render",value:function(){var t=this;console.log(this.state);var e=this.props.userTrackNum;return n.a.createElement("div",null,0===e?n.a.createElement("p",{id:"creation-error",onClick:function(){return window.location.reload(!0)}},"Sorry, but you choose wrong number of songs in ",n.a.createElement("span",{style:{color:"#fff"}},"step 2"),". Click on this text to go back to playlist selection page."):n.a.createElement("div",{id:"preview-box"},n.a.createElement("div",{id:"preview-selected"},n.a.createElement("p",{className:"preview-header"},"SELECTED PLAYLIST:"),n.a.createElement("img",{src:this.props.imageUrl,className:"preview-selected-img",alt:this.props.playlistName,title:this.props.playlistName}),n.a.createElement("p",{className:"preview-name"},"Name: ",n.a.createElement("span",{style:{opacity:.5}},this.props.playlistName)),n.a.createElement("p",{className:"preview-num"},"Num of songs: ",n.a.createElement("span",{style:{opacity:.5}},this.props.tracksNum))),n.a.createElement("div",{id:"preview-btns"},n.a.createElement("div",{id:"preview-btn--create",className:"preview-btn",onClick:function(){return y({step:4,uris:t.state.uris,playlistName:t.props.playlistName})}},"Create"),n.a.createElement("div",{id:"preview-btn--cancel",className:"preview-btn",onClick:function(){return window.location.reload(!1)}},"Cancel")),n.a.createElement("div",{id:"preview-pared"},n.a.createElement("p",{className:"preview-header"},"AFTER PARE DOWN:"),this.state.img4?this.state.img4.length<4?n.a.createElement("img",{src:this.state.img4[0],className:"preview-pared-img--big",alt:this.props.playlistName+"Pared Down",title:this.props.playlistName+"Pared Down"}):n.a.createElement("div",{id:"preview-pared-img-box"},n.a.createElement("img",{src:this.state.img4[2],className:"preview-pared-img",alt:this.props.playlistName+"Pared Down",title:this.props.playlistName+"Pared Down"}),n.a.createElement("img",{src:this.state.img4[0],className:"preview-pared-img",alt:this.props.playlistName+"Pared Down",title:this.props.playlistName+"Pared Down"}),n.a.createElement("img",{src:this.state.img4[3],className:"preview-pared-img",alt:this.props.playlistName+"Pared Down",title:this.props.playlistName+"Pared Down"}),n.a.createElement("img",{src:this.state.img4[1],className:"preview-pared-img",alt:this.props.playlistName+"Pared Down",title:this.props.playlistName+"Pared Down"})):null,n.a.createElement("p",{className:"preview-name"},"Name: ",n.a.createElement("span",{style:{opacity:.5}},this.props.playlistName," - Pared Down")),n.a.createElement("p",{className:"preview-num"},"Num of songs: ",n.a.createElement("span",{style:{opacity:.5}},e)))))}}]),e}(s.Component),O=function(t){function e(){var t;return Object(c.a)(this,e),(t=Object(p.a)(this,Object(u.a)(e).call(this))).state={success:null},t}return Object(h.a)(e,t),Object(l.a)(e,[{key:"componentDidMount",value:function(){var t=this,e=this.props.uris,a=f.a.parse(window.location.search).access_token;a&&fetch("https://api.spotify.com/v1/users/".concat(this.props.userID,"/playlists"),{method:"POST",body:JSON.stringify({name:this.props.playlistName+" - Pared Down"}),headers:{Authorization:"Bearer "+a}}).then((function(t){return t.json()})).then((function(s){for(var n=0;n<e.length;n++)fetch("https://api.spotify.com/v1/playlists/".concat(s.id,"/tracks"),{method:"POST",body:JSON.stringify({uris:t.props.uris[n]}),headers:{Authorization:"Bearer "+a,"Content-Type":"application/json"}}).then((function(e){201===e.status&&t.setState({success:"Playlist was created!"})}))}))}},{key:"render",value:function(){return this.state.success?n.a.createElement("div",null,n.a.createElement("p",{className:"step--header"},this.state.success),n.a.createElement("div",{onClick:function(){return window.location.reload(!0)},className:"btn",style:{backgroundColor:"#333",marginTop:0,maxWidth:270}},"Pare down another playlist")):null}}]),e}(s.Component),D=function(t){function e(){return Object(c.a)(this,e),Object(p.a)(this,Object(u.a)(e).apply(this,arguments))}return Object(h.a)(e,t),Object(l.a)(e,[{key:"render",value:function(){return n.a.createElement("div",{className:"footer"},n.a.createElement("p",null,n.a.createElement("span",null,"Copyright \xa9 ",(new Date).getFullYear()," || "),n.a.createElement("a",{href:"https://github.com/datguysheepy/pare-down"}," Github: datguysheepy")))}}]),e}(s.Component),S=g;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(n.a.createElement(S,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()}))}},[[11,1,2]]]);
//# sourceMappingURL=main.b0e8175c.chunk.js.map